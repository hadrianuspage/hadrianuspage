<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lucky Of Wheel</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background: linear-gradient(to right, #ffcccb, #ffeb3b);
            margin: 0;
            overflow: hidden;
        }
        h1 {
            margin-bottom: 20px;
            color: #333;
        }
        #wheel {
            width: 300px;
            height: 300px;
            border: 16px solid #4CAF50;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            transition: transform 2s cubic-bezier(0.33, 1, 0.68, 1);
            background-color: #fff;
            display: none; /* Hide the wheel initially */
        }
        .slice {
            position: absolute;
            width: 50%;
            height: 50%;
            background-color: #f39c12;
            transform-origin: 100% 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            border: 1px solid #fff;
        }
        .slice:nth-child(odd) {
            background-color: #e67e22;
        }
        #spin-button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: none; /* Hide the spin button initially */
            align-self: center; /* Center the spin button */
        }
        #result {
            margin-top: 20px;
            font-size: 24px;
            color: #333;
        }
        #logs-container {
            margin-top: 20px;
            display: none; /* Hide logs container initially */
        }
        #logs {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #ccc;
            padding: 10px;
            width: 300px;
            font-size: 16px;
            color: #333;
            background: #f9f9f9;
            white-space: pre-wrap; /* Maintain formatting */
        }
        #copy-logs {
            margin-top: 10px;
            padding: 10px 20px;
            font-size: 16px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #remaining-spins {
            margin-top: 20px;
            font-size: 20px;
            color: #333;
        }
    </style>
</head>
<body>
    <h1>Lucky Of Wheel</h1>
    <div id="gamertag-container">
        <input type="text" id="gamertag-input" placeholder="Enter your Gamertag" />
        <button id="start-button">Start</button>
    </div>
    <div id="spin-container" style="display: none;">
        <div id="wheel"></div>
        <center>
        <div id="remaining-spins">Left to spin: 3</div>
        </center>
        <center>
        <button id="spin-button">Spin</button>
        </center>
        <div id="result"></div>
        <div id="logs-container">
            <textarea id="logs" readonly></textarea>
            <button id="copy-logs">Copy</button>
        </div>
    </div>
    <script>
    const bypassGamertags = ["admin", "syaiful"]; // Gamertags that can spin continuously
    const prizes = [];
    const goodPrizes = [
        "1 Diamond", "5 Iron Ingot", "1 Emerald", "Fortune 3", "1 Diamond Sword", 
        "5 Netherite Ingot", "Sharpness 1", "Mending 1", "Fortune 1", "Iron Pickaxe", 
        "5 Gold", "3 Diamond", "1 Bed", "1 Bow", "1 Arrow", "5 Emerald", 
        "16 Iron Ingot", "1 Netherite Ingot", "Full Set Gold Armor", "Spyglass", 
        "1 TNT", "Enchanting Wings", "20 Emerald", "4 Diamond", 
        "Full Set Gold Armor", "Full Set Iron Tools", "5 Netherite Ingot", 
        "Any Pickaxe with enchantment Fortune 3 + Max Efficiency"
    ];
    const regularPrizes = [
        "32 Cobblestone", "Cobweb", "Lava Bucket", "Water Bucket", "Obsidian", 
        "5 Wool", "Custom Enchant 1", "Random Curse Enchantment", "15 Coal", 
        "10 Redstone Ore", "25 Lapis Lazuli", "20 Gravel", "20 Sand", 
        "20 Glass", "Milk", "3 Any Food", "2 Any Seeds", "Rose", "Poppy", 
        "Paper", "1 Book", "1 Fishing Rod"
    ];

    // Populate prizes
    for (let i = 0; i < 6000; i++) {
        if (i < 3000) {
            prizes.push("ZONK");
        } else if (i < 3600) {
            prizes.push(goodPrizes[Math.floor(Math.random() * goodPrizes.length)]);
        } else {
            prizes.push(regularPrizes[Math.floor(Math.random() * regularPrizes.length)]);
        }
        if (i === 5999) {
            prizes.push("6 Netherite Ingot");
        }
    }

    const wheel = document.getElementById("wheel");
    const spinButton = document.getElementById("spin-button");
    const result = document.getElementById("result");
    const logsContainer = document.getElementById("logs-container");
    const logsTextarea = document.getElementById("logs");
    const gamertagInput = document.getElementById("gamertag-input");
    const startButton = document.getElementById("start-button");
    const spinContainer = document.getElementById("spin-container");
    const remainingSpinsText = document.getElementById("remaining-spins");

    let gamertag = '';
    let spinCount = 0;
    const spinResults = [];
    const maxSpins = 3;

    // Load spin count and last spin time from localStorage
    const storedSpinCount = localStorage.getItem('spinCount');
    const lastSpinTime = localStorage.getItem('lastSpinTime') ? parseInt(localStorage.getItem('lastSpinTime')) : null;

    if (storedSpinCount) {
        spinCount = parseInt(storedSpinCount);
    }

    const currentTime = new Date().getTime();
    const currentHour = new Date().getHours();

    // Reset spins at midnight if not a bypass user
    if (lastSpinTime && new Date(lastSpinTime).getDate() === new Date().getDate() && !bypassGamertags.includes(gamertag)) {
        alert("You must wait until midnight to spin again.");
        spinCount = maxSpins; // Prevent further spins until time is up
    } else if (currentHour === 0) {
        // Reset spin count if it's midnight
        spinCount = 0;
        localStorage.setItem('spinCount', spinCount);
    }

    function createWheel() {
        const anglePerSlice = 360 / prizes.length;
        for (let i = 0; i < prizes.length; i++) {
            const slice = document.createElement("div");
            slice.className = "slice";
            slice.style.transform = `rotate(${anglePerSlice * i}deg)`;
            slice.innerText = "?";
            wheel.appendChild(slice);
        }
    }

    startButton.addEventListener("click", () => {
        gamertag = gamertagInput.value.trim();
        if (gamertag) {
            document.getElementById("gamertag-container").style.display = 'none';
            spinContainer.style.display = 'block';
            createWheel();
            wheel.style.display = 'block'; // Show the wheel
            spinButton.style.display = 'inline'; // Show the spin button
        } else {
            alert("Please enter a valid Gamertag.");
        }
    });

    spinButton.addEventListener("click", () => {
        // Check if gamertag is in bypass list
        if (!bypassGamertags.includes(gamertag)) {
            alert("You are not allowed to spin.");
            return;
        }

        // Allow spins for bypass users
        const randomDegree = Math.floor(Math.random() * 360 + 720);
        wheel.style.transform = `rotate(${randomDegree}deg)`;

        const prizeIndex = Math.floor(((randomDegree % 360) / 360) * prizes.length);
        setTimeout(() => {
            const prize = prizes[prizeIndex];
            result.innerText = `You won: ${prize}`;
            spinResults.push(prize);
            spinCount++;

            remainingSpinsText.innerText = `Left to spin: ${maxSpins - spinCount}`;
            localStorage.setItem('spinCount', spinCount); // Update spin count

            if (spinCount >= maxSpins) {
                localStorage.setItem('lastSpinTime', currentTime); // Set last spin time
                const logMessage = `Hai ${gamertag}, berikut hadiah yang bisa kamu dapatkan:\n\n${spinResults.join('\n')}\n\nUntuk claim hadiah ini silakan hubungi Owner Valme SMP`;
                logsTextarea.value = logMessage;
                logsContainer.style.display = 'block'; // Show logs container after 3 spins
            }
        }, 2000);
    });

    document.getElementById("copy-logs").addEventListener("click", () => {
        logsTextarea.select();
        document.execCommand("copy");
        alert("Logs copied to clipboard!");
    });

    gamertagInput.focus();
</script>
</body>
</html>
